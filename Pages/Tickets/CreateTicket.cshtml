@page
@model ots.Pages.Tickets.CreateTicketModel
@{
    Layout = "_Layout";
}

<form method="post" id="CreateNewTicketForm">
    <div class="border p-3 mt-4">
        <div class="row pb-2">
            <h2 class="text-primary pl-3">Create Ticket</h2>
            <hr/>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.Title"></label>
            <input class="form-control" asp-for="@Model.Ticket.Title" type="text" required/>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.Description"></label>
            <textarea class="form-control" asp-for="@Model.Ticket.Description" form="CreateNewTicketForm" required></textarea>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.Notes"></label>
            <textarea class="form-control" asp-for="@Model.Ticket.Notes" form="CreateNewTicketForm" required></textarea>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.Business"></label>
            <select class="form-control" asp-for="Ticket.ClientId">
                <option></option>
                @foreach(var business in Model.Businesses)
                {
                <option value=@business.BusinessId>@business.BusinessName</option> 
                }
            </select>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.Client"></label>
            <select class="form-control" asp-for="Ticket.ClientId">
                <option></option>
                @foreach(var client in Model.Clients)
                {
                <option value=@client.ClientId>@client.GetFullName()</option> 
                }
            </select>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.Family"></label>
            <select class="form-control" asp-for="Ticket.FamilyId">
                <option></option>
                @foreach(var family in Model.Families)
                {
                <option value=@family.FamilyId>@family.FamilyName</option> 
                }
            </select>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.Staff"></label>
            <select class="form-control" asp-for="Ticket.StaffId">
                <option></option>
                @foreach(var staff in Model.Staff)
                {
                <option value=@staff.StaffId>@staff.GetFullName()</option> 
                }
            </select>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.IssueType"></label>
            <select class="form-control" asp-for="@Model.Ticket.IssueType" asp-items="Html.GetEnumSelectList<ots.Models.Ticket.IType>()" required></select>
        </div>
        <div class="form-group row mb-3">
            <label asp-for="Ticket.IssuePriority"></label>
            <select class="form-control" asp-for="@Model.Ticket.IssuePriority" asp-items="Html.GetEnumSelectList<ots.Models.Ticket.IPriority>()" required></select>
        </div>
        <button type="submit" class="btn btn-primary" style="width:150px">Create</button>
    </div>
</form>